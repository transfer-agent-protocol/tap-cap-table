name: PR Review
on:
    pull_request:
        types: [opened, ready_for_review]
jobs:
    review:
        name: Warp Agent Review
        runs-on: ubuntu-latest
        permissions:
            contents: read
            pull-requests: write
        steps:
            - name: Checkout
              uses: actions/checkout@v4
              with:
                  fetch-depth: 0
            - name: Review code changes in Warp
              uses: warpdotdev/warp-agent-action@v1
              timeout-minutes: 10
              continue-on-error: true
              with:
                  prompt: |
                      Review the code changes in this pull request:
                      1. Analyze all changes for potential issues with style, security, correctness, and best practices
                      2. Check for common bugs, edge cases, and potential vulnerabilities
                      3. Verify code follows the project conventions documented in WARP.md and .github/copilot-instructions.md
                      4. Provide inline comments on specific lines that need attention
                      5. Include a summary comment with overall feedback if applicable
                  warp_api_key: ${{ secrets.WARP_AGENT_API_KEY }}
